package org.marc4j.test;

import org.junit.Test;
import org.marc4j.MarcStreamReader;
import org.marc4j.marc.Record;
import org.marc4j.test.utils.StaticTestRecords;
import org.marc4j.test.utils.TestUtils;

import java.io.ByteArrayInputStream;
import java.io.InputStream;
import java.io.StringBufferInputStream;

import static org.junit.Assert.assertFalse;
import static org.junit.Assert.assertNotNull;
import static org.junit.Assert.assertTrue;

public class ReaderTest {

    @Test
    public void testMarcStreamReader() throws Exception {
//        InputStream input = getClass().getResourceAsStream(
//                StaticTestRecords.RESOURCES_CHABON_MRC);
//        assertNotNull(input);
//        String marc = "03427nmd a2200325 ua4500001001300000003000800013005001700021007001500038008004100053040002600094110004400120245028500164256006800449260005600517336003800573337002600611338003600637516006300673520159000736650002802326650002602354650001002380650001402390650001202404650001102416650000902427650003702436651000802473856062002481\u001E54-008008027\u001EMdBeDPC\u001E20180202152612.0\u001Ecr#mn#|||m||||\u001E180202c####9999mduz|#|###|||#0####1eng#|\u001E  \u001FaMdBeDPC$beng$cMdBeDPC\u001E10\u001FaUnited States Department of Agriculture\u001E10\u001FaDemographics - Field Crops from the Agricultural Census database\u001FbDate Type: Year; Commodity: BARLEY; Indicator: BARLEY - OPERATIONS WITH AREA HARVESTED; Domain Category: TENURE: (PART OWNER)\u001FcData-Planet by Conquest Systems\u001FhData-Planet Statistical Datasets [electronic resource]\u001E  \u001Faonline resource with data files\u001Fbstatistical data and abstract.\u001E  \u001FaBethesda, MD\u001FbData-Planet by Conquest Systems\u001Fc2018\u001E  \u001Facomputer dataset\u001Fbcod\u001F2rdacontent\u001E  \u001Facomputer\u001Fbc\u001F2rdamedia\u001E  \u001Faonline resource\u001Fbcr\u001F2rdacarrier\u001E  \u001FaStatistical data with bibliographic citation and abstract.\u001E  \u001FaReports metrics describing the race, gender, ethnicity, and other characteristics of farm operators in the United States involved in animal and livestock production. The United States Department of Agriculture collects race and Hispanic origin information following the Office of Management and Budget's standards for collecting and tabulating data on race and ethnicity. The Census of Agriculture, conducted every five years by the National Agricultural Statistics Service (NASS) of the United States Department of Agriculture (USDA) since 1840, provides comprehensive data on the current situation, historical changes, and long-term trends in US agriculture. The Census also collects information on the agricultural industry that is not gathered elsewhere in the annual survey programs conducted by the NASS, including data on areas such as agritourism, organic production, farmer demographics, specialized agricultural production, Internet access and more.  Statistics offer a detailed picture of US farms and ranches and the people who operate them. Participation in the Census is required by law, and is the responsibility of every farmer and rancher, regardless of the size or type of operation. For Census purposes, a farm is any place from which $1,000 or more of agricultural products were produced and sold, or normally would have been sold, during the Census year. Data are provided, where available, for the nation, states, counties, and ZIP code. With the 2012 Census of Agriculture, ZIP code tabulations will not be available due to the impact of sequestration, per NASS.\u001E 4\u001FaAgricultural Production\u001E 4\u001FaAgricultural Products\u001E 4\u001FaCrops\u001E 4\u001FaEthnicity\u001E 4\u001FaFarmers\u001E 4\u001FaGender\u001E 4\u001FaRace\u001E 4\u001FaSociodemographic Characteristics\u001E 4\u001FaUSA\u001E40\u001Fuhttps://statisticaldatasets.data-planet.com/dataplanet/content?type=dp&param=7fuKsUAw6JIaGcWOIA3l-Vwto9mzZgrNsrcNupIBHY9D81phK8gxcwW-PSzgwGaTCQqlOEUWjB_ppgiAUg17WIOP4H4dDgcddctayFqep2BYmNh7rtJeaIFd8PnTD-EeRDWmm1A9hdLRdiuYHFPwZWx4-THRMwrR8UOKqiiHePlhGF5YR9TaZ8pzC0KR5_6DQhz_ozh9uplti2ZN_Q-gfVFUyOquTrBTejZLa9mA-EdYQljp-ITSSCsEiI0raWS6yCRs5kSNxE8P5uqkHS0zKXxk624ETCcBq-0AC6GVCIQ%3D&view=RANKING%7COrg0%7C%7CTimeUnit0%7C%7C250_0%4020%2C250_1%401208%2C250_2%4015014%7C2012%7C%7Cfalse&exp=7fuKsUAw6JKvEAT2Orb_xsiTfTW5o29HbEM8bZqAE3XsE9XAhdG2Eo9h5Qt8fhF8Yn1GjBfzI3sfmlWJ36t4u5PMwppsaSiTDP0fUpujM9KV2lxQfofQCw%3D%3D\u001FxBASIC\u001E\u001D03466nmd a2200325 ua4500001001300000003000800013005001700021007001500038008004100053040002600094110004400120245032400164256006800488260005600556336003800612337002600650338003600676516006300712520159000775650002802365650002602393650001002419650001402429650001202443650001102455650000902466650003702475651000802512856062002520\u001E55-008008027\u001EMdBeDPC\u001E20180202152612.0\u001Ecr#mn#|||m||||\u001E180202c####9999mduz|#|###|||#0####1eng#|\u001E  \u001FaMdBeDPC$beng$cMdBeDPC\u001E10\u001FaUnited States Department of Agriculture\u001E10\u001FaDemographics - Field Crops from the Agricultural Census database\u001FbDate Type: Year; Commodity: COTTON; Indicator: COTTON - OPERATIONS WITH AREA HARVESTED; Domain Category: TENURE: (PART OWNER) AND AREA HARVESTED: (250 TO 499 ACRES)\u001FcData-Planet by Conquest Systems\u001FhData-Planet Statistical Datasets [electronic resource]\u001E  \u001Faonline resource with data files\u001Fbstatistical data and abstract.\u001E  \u001FaBethesda, MD\u001FbData-Planet by Conquest Systems\u001Fc2018\u001E  \u001Facomputer dataset\u001Fbcod\u001F2rdacontent\u001E  \u001Facomputer\u001Fbc\u001F2rdamedia\u001E  \u001Faonline resource\u001Fbcr\u001F2rdacarrier\u001E  \u001FaStatistical data with bibliographic citation and abstract.\u001E  \u001FaReports metrics describing the race, gender, ethnicity, and other characteristics of farm operators in the United States involved in animal and livestock production. The United States Department of Agriculture collects race and Hispanic origin information following the Office of Management and Budget's standards for collecting and tabulating data on race and ethnicity. The Census of Agriculture, conducted every five years by the National Agricultural Statistics Service (NASS) of the United States Department of Agriculture (USDA) since 1840, provides comprehensive data on the current situation, historical changes, and long-term trends in US agriculture. The Census also collects information on the agricultural industry that is not gathered elsewhere in the annual survey programs conducted by the NASS, including data on areas such as agritourism, organic production, farmer demographics, specialized agricultural production, Internet access and more.  Statistics offer a detailed picture of US farms and ranches and the people who operate them. Participation in the Census is required by law, and is the responsibility of every farmer and rancher, regardless of the size or type of operation. For Census purposes, a farm is any place from which $1,000 or more of agricultural products were produced and sold, or normally would have been sold, during the Census year. Data are provided, where available, for the nation, states, counties, and ZIP code. With the 2012 Census of Agriculture, ZIP code tabulations will not be available due to the impact of sequestration, per NASS.\u001E 4\u001FaAgricultural Production\u001E 4\u001FaAgricultural Products\u001E 4\u001FaCrops\u001E 4\u001FaEthnicity\u001E 4\u001FaFarmers\u001E 4\u001FaGender\u001E 4\u001FaRace\u001E 4\u001FaSociodemographic Characteristics\u001E 4\u001FaUSA\u001E40\u001Fuhttps://statisticaldatasets.data-planet.com/dataplanet/content?type=dp&param=7fuKsUAw6JIaGcWOIA3l-Vwto9mzZgrNMFLFPlGtk6FnjoQZkwLM8jWhRg6gcm8a7szy16Zd-qX21gWL60K16CYDcvh94mjfobuCg_FwKocJTwwJUl90QQZtUt2a1-MRCznwYjKgrkv2NgIXnZXPjr7R5HVLvU4vLOm2ZTd4B5VlwrZdkER7sbSgs5sIhubGi-5IjIie32_7MvClaen243TYNMdn4hAqv-EmO2IG_RRFwSXyg1l5E1WiWY2L11VofjuPoj4uRInaj-Ifd7QoAkn9fam-vckCM9OfDYUkkqY%3D&view=RANKING%7COrg0%7C%7CTimeUnit0%7C%7C250_0%4058%2C250_1%406587%2C250_2%4015038%7C2012%7C%7Cfalse&exp=7fuKsUAw6JKvEAT2Orb_xsiTfTW5o29HbEM8bZqAE3XsE9XAhdG2Eo9h5Qt8fhF8Yn1GjBfzI3sfmlWJ36t4u5PMwppsaSiTDP0fUpujM9KV2lxQfofQCw%3D%3D\u001FxBASIC\u001E\u001D03507nmd a2200325 ua4500001001300000003000800013005001700021007001500038008004100053040002600094110004400120245036400164256006800528260005600596336003800652337002600690338003600716516006300752520159000815650002802405650002602433650001002459650001402469650001202483650001102495650000902506650003702515651000802552856062102560\u001E56-008008027\u001EMdBeDPC\u001E20180202152612.0\u001Ecr#mn#|||m||||\u001E180202c####9999mduz|#|###|||#0####1eng#|\u001E  \u001FaMdBeDPC$beng$cMdBeDPC\u001E10\u001FaUnited States Department of Agriculture\u001E10\u001FaDemographics - Field Crops from the Agricultural Census database\u001FbDate Type: Year; Commodity: TOBACCO; Indicator: TOBACCO - OPERATIONS WITH AREA HARVESTED; Domain Category: OPERATORS, PRINCIPAL: (PRIMARY OCCUPATION, (EXCL FARMING)) AND AREA HARVESTED: (1.0 TO 1.9 ACRES)\u001FcData-Planet by Conquest Systems\u001FhData-Planet Statistical Datasets [electronic resource]\u001E  \u001Faonline resource with data files\u001Fbstatistical data and abstract.\u001E  \u001FaBethesda, MD\u001FbData-Planet by Conquest Systems\u001Fc2018\u001E  \u001Facomputer dataset\u001Fbcod\u001F2rdacontent\u001E  \u001Facomputer\u001Fbc\u001F2rdamedia\u001E  \u001Faonline resource\u001Fbcr\u001F2rdacarrier\u001E  \u001FaStatistical data with bibliographic citation and abstract.\u001E  \u001FaReports metrics describing the race, gender, ethnicity, and other characteristics of farm operators in the United States involved in animal and livestock production. The United States Department of Agriculture collects race and Hispanic origin information following the Office of Management and Budget's standards for collecting and tabulating data on race and ethnicity. The Census of Agriculture, conducted every five years by the National Agricultural Statistics Service (NASS) of the United States Department of Agriculture (USDA) since 1840, provides comprehensive data on the current situation, historical changes, and long-term trends in US agriculture. The Census also collects information on the agricultural industry that is not gathered elsewhere in the annual survey programs conducted by the NASS, including data on areas such as agritourism, organic production, farmer demographics, specialized agricultural production, Internet access and more.  Statistics offer a detailed picture of US farms and ranches and the people who operate them. Participation in the Census is required by law, and is the responsibility of every farmer and rancher, regardless of the size or type of operation. For Census purposes, a farm is any place from which $1,000 or more of agricultural products were produced and sold, or normally would have been sold, during the Census year. Data are provided, where available, for the nation, states, counties, and ZIP code. With the 2012 Census of Agriculture, ZIP code tabulations will not be available due to the impact of sequestration, per NASS.\u001E 4\u001FaAgricultural Production\u001E 4\u001FaAgricultural Products\u001E 4\u001FaCrops\u001E 4\u001FaEthnicity\u001E 4\u001FaFarmers\u001E 4\u001FaGender\u001E 4\u001FaRace\u001E 4\u001FaSociodemographic Characteristics\u001E 4\u001FaUSA\u001E40\u001Fuhttps://statisticaldatasets.data-planet.com/dataplanet/content?type=dp&param=7fuKsUAw6JIaGcWOIA3l-Vwto9mzZgrNBzPFXIt_ZQ1X5u_hbLpdayAytKZ0LOqtnKl6_0U_msoABx2CFacWvpQNhYc_X-VUWH_KEWhn_cp2IYdDjFcAVpRYiHhiiX87x_5fxck_XL1QMuVgwc-oUjNOpRJ-2sUCcnXZJ6mlW6xswJurD9xm-xjWUoQf-dUh6dqYRJFsGxlNM0mpYO1WA3dZgqY6TKfls3xzYhMfJpVgd1SYD6fvYpPSq96yQs1rft80p8iMSR337QCFzhyp-7j9fbGwc_kiS5Lx2MiQMtg%3D&view=RANKING%7COrg0%7C%7CTimeUnit0%7C%7C250_0%40275%2C250_1%4017594%2C250_2%409860%7C2012%7C%7Cfalse&exp=7fuKsUAw6JKvEAT2Orb_xsiTfTW5o29HbEM8bZqAE3XsE9XAhdG2Eo9h5Qt8fhF8Yn1GjBfzI3sfmlWJ36t4u5PMwppsaSiTDP0fUpujM9KV2lxQfofQCw%3D%3D\u001FxBASIC\u001E\u001D03454nmd a2200325 ua4500001001300000003000800013005001700021007001500038008004100053040002600094110004400120245031000164256006800474260005600542336003800598337002600636338003600662516006300698520159000761650002802351650002602379650001002405650001402415650001202429650001102441650000902452650003702461651000802498856062202506\u001E57-008008027\u001EMdBeDPC\u001E20180202152612.0\u001Ecr#mn#|||m||||\u001E180202c####9999mduz|#|###|||#0####1eng#|\u001E  \u001FaMdBeDPC$beng$cMdBeDPC\u001E10\u001FaUnited States Department of Agriculture\u001E10\u001FaDemographics - Field Crops from the Agricultural Census database\u001FbDate Type: Year; Commodity: GRAIN; Indicator: GRAIN, OTHER - SALES, MEASURED IN $; Domain Category: TENURE: (PART OWNER) AND SALES: (50,000 OR MORE $)\u001FcData-Planet by Conquest Systems\u001FhData-Planet Statistical Datasets [electronic resource]\u001E  \u001Faonline resource with data files\u001Fbstatistical data and abstract.\u001E  \u001FaBethesda, MD\u001FbData-Planet by Conquest Systems\u001Fc2018\u001E  \u001Facomputer dataset\u001Fbcod\u001F2rdacontent\u001E  \u001Facomputer\u001Fbc\u001F2rdamedia\u001E  \u001Faonline resource\u001Fbcr\u001F2rdacarrier\u001E  \u001FaStatistical data with bibliographic citation and abstract.\u001E  \u001FaReports metrics describing the race, gender, ethnicity, and other characteristics of farm operators in the United States involved in animal and livestock production. The United States Department of Agriculture collects race and Hispanic origin information following the Office of Management and Budget's standards for collecting and tabulating data on race and ethnicity. The Census of Agriculture, conducted every five years by the National Agricultural Statistics Service (NASS) of the United States Department of Agriculture (USDA) since 1840, provides comprehensive data on the current situation, historical changes, and long-term trends in US agriculture. The Census also collects information on the agricultural industry that is not gathered elsewhere in the annual survey programs conducted by the NASS, including data on areas such as agritourism, organic production, farmer demographics, specialized agricultural production, Internet access and more.  Statistics offer a detailed picture of US farms and ranches and the people who operate them. Participation in the Census is required by law, and is the responsibility of every farmer and rancher, regardless of the size or type of operation. For Census purposes, a farm is any place from which $1,000 or more of agricultural products were produced and sold, or normally would have been sold, during the Census year. Data are provided, where available, for the nation, states, counties, and ZIP code. With the 2012 Census of Agriculture, ZIP code tabulations will not be available due to the impact of sequestration, per NASS.\u001E 4\u001FaAgricultural Production\u001E 4\u001FaAgricultural Products\u001E 4\u001FaCrops\u001E 4\u001FaEthnicity\u001E 4\u001FaFarmers\u001E 4\u001FaGender\u001E 4\u001FaRace\u001E 4\u001FaSociodemographic Characteristics\u001E 4\u001FaUSA\u001E40\u001Fuhttps://statisticaldatasets.data-planet.com/dataplanet/content?type=dp&param=7fuKsUAw6JIaGcWOIA3l-Vwto9mzZgrNj-JjkUbatuXJKrWxSJe6xCKkNNadvRgL3HJ4EphRvoyJQfSOygxbDtZmd2EfD6C973O8P1FEwLT5mu-M3nBRE2obWYcGnbUssHWwGmHFw4b_YD91LoHbVeB7eTKjRK6Se0TJhRD2QMvYI_55SIZncJJ_IkY40DmlsC_RLL6z7dDbBJKTbR8EvjiTY60pQwltyBwqDazEcDSkNlmyC1MkAceLtKv8INJqLfVcl3R09_sObxWx84H5sT9kKFDDGCBSmRMcRNJ5iOo%3D&view=RANKING%7COrg0%7C%7CTimeUnit0%7C%7C250_0%40122%2C250_1%4011932%2C250_2%4015189%7C2012%7C%7Cfalse&exp=7fuKsUAw6JKvEAT2Orb_xsiTfTW5o29HbEM8bZqAE3XsE9XAhdG2Eo9h5Qt8fhF8Yn1GjBfzI3sfmlWJ36t4u5PMwppsaSiTs9kpcPW5gr8i3wkQo1LKFw%3D%3D\u001FxBASIC\u001E\u001D03475nmd a2200325 ua4500001001300000003000800013005001700021007001500038008004100053040002600094110004400120245033100164256006800495260005600563336003800619337002600657338003600683516006300719520159000782650002802372650002602400650001002426650001402436650001202450650001102462650000902473650003702482651000802519856062202527\u001E58-008008027\u001EMdBeDPC\u001E20180202152612.0\u001Ecr#mn#|||m||||\u001E180202c####9999mduz|#|###|||#0####1eng#|\u001E  \u001FaMdBeDPC$beng$cMdBeDPC\u001E10\u001FaUnited States Department of Agriculture\u001E10\u001FaDemographics - Field Crops from the Agricultural Census database\u001FbDate Type: Year; Commodity: SORGHUM; Indicator: SORGHUM, GRAIN - ACRES HARVESTED; Domain Category: OPERATORS, PRINCIPAL: (PRIMARY OCCUPATION, (EXCL FARMING), AGE 55 TO 64)\u001FcData-Planet by Conquest Systems\u001FhData-Planet Statistical Datasets [electronic resource]\u001E  \u001Faonline resource with data files\u001Fbstatistical data and abstract.\u001E  \u001FaBethesda, MD\u001FbData-Planet by Conquest Systems\u001Fc2018\u001E  \u001Facomputer dataset\u001Fbcod\u001F2rdacontent\u001E  \u001Facomputer\u001Fbc\u001F2rdamedia\u001E  \u001Faonline resource\u001Fbcr\u001F2rdacarrier\u001E  \u001FaStatistical data with bibliographic citation and abstract.\u001E  \u001FaReports metrics describing the race, gender, ethnicity, and other characteristics of farm operators in the United States involved in animal and livestock production. The United States Department of Agriculture collects race and Hispanic origin information following the Office of Management and Budget's standards for collecting and tabulating data on race and ethnicity. The Census of Agriculture, conducted every five years by the National Agricultural Statistics Service (NASS) of the United States Department of Agriculture (USDA) since 1840, provides comprehensive data on the current situation, historical changes, and long-term trends in US agriculture. The Census also collects information on the agricultural industry that is not gathered elsewhere in the annual survey programs conducted by the NASS, including data on areas such as agritourism, organic production, farmer demographics, specialized agricultural production, Internet access and more.  Statistics offer a detailed picture of US farms and ranches and the people who operate them. Participation in the Census is required by law, and is the responsibility of every farmer and rancher, regardless of the size or type of operation. For Census purposes, a farm is any place from which $1,000 or more of agricultural products were produced and sold, or normally would have been sold, during the Census year. Data are provided, where available, for the nation, states, counties, and ZIP code. With the 2012 Census of Agriculture, ZIP code tabulations will not be available due to the impact of sequestration, per NASS.\u001E 4\u001FaAgricultural Production\u001E 4\u001FaAgricultural Products\u001E 4\u001FaCrops\u001E 4\u001FaEthnicity\u001E 4\u001FaFarmers\u001E 4\u001FaGender\u001E 4\u001FaRace\u001E 4\u001FaSociodemographic Characteristics\u001E 4\u001FaUSA\u001E40\u001Fuhttps://statisticaldatasets.data-planet.com/dataplanet/content?type=dp&param=7fuKsUAw6JIaGcWOIA3l-Vwto9mzZgrN251-z3av-bd7qe1DT8rdjEb_XK01vfYie34_o2yYMARl7F-ojW4PSIYev1txFheT1XReTQS19P5g2uk8Wi0OY9VrYL2IWMdiX7GPNuyZC7Up7dxfl23N47qHBsgXm-oNiWKnnBuoCnLlzYyxxtvgAKn1N13O6MN97u2KpuIS-EFmD7u6Ab4E17ynrtfGaIzSBIsV7qKloS24WRYfwkrYRY2BF9RvQmZ6N4jy_uQ73U_BMSEwURrSkNsN6nGTTUDdulyX1aMr95M%3D&view=RANKING%7COrg0%7C%7CTimeUnit0%7C%7C250_0%40253%2C250_1%4016806%2C250_2%4010558%7C2012%7C%7Cfalse&exp=7fuKsUAw6JKvEAT2Orb_xsiTfTW5o29HbEM8bZqAE3XsE9XAhdG2Eo9h5Qt8fhF8Yn1GjBfzI3sfmlWJ36t4u5PMwppsaSiTs9kpcPW5gr8i3wkQo1LKFw%3D%3D\u001FxBASIC\u001E";
//        String lbmarc = "01002nam0 2200277   4500000001000000001001300010005001700023010002800040100004100068101000800109102001500117105001800132106000600150200018200156210003100338215002600369330009500395510003500490517006600525606002100591690001400612701002400626701003200650801002100682801002200703\u001E900222017\u001E012003011385\u001E20210831125124.0\u001E  \u001Fa7-5057-2171-2\u001FdCNY24.00\u001E  \u001Fa20050416d2006    em y0chiy0110    ea\u001E0 \u001Fachi\u001E  \u001FaCN\u001Fb110000\u001E  \u001Fay   z   000yy\u001E  \u001Far\u001E1 \u001Fa帝国残梦\u001FAdi guo can meng\u001Fe美利坚霸权主义的终结\u001Fh下\u001FEmei li jian ba quan zhu yi de zhong jie\u001Fd= Declining of the empire\u001Ff谢韬, 郑佳节编著\u001FFxie tao ,  zheng jia jie bian zhu\u001Fzeng\u001E  \u001Fa北京\u001Fc中国友谊出版社\u001Fd2006\u001E  \u001Fa186页\u001Fc照片, 图\u001Fd24cm\u001E  \u001Fa本书重点探讨有哪些现实因素将阻碍美国实现其单极霸权，以及为什么说美国的这一野心注定会失败。\u001E1 \u001Fa= Declining of the empire\u001Fzeng\u001E1 \u001Fa美利坚霸权主义的终结\u001FAmei li jian ba quan zhu yi de zhong jie\u001E0 \u001Fa政治\u001Fx研究\u001Fy美国\u001E  \u001FaD771.2\u001Fv4\u001E 0\u001Fa谢韬\u001FAxie tao\u001F4编著\u001E 0\u001Fa郑佳节\u001FAzheng jia jie\u001F4编著\u001E 0\u001FaCN\u001FbQA\u001Fc20090930\u001E 2\u001FaCN\u001FbSYS\u001Fc20121130\u001E\u001D";
        String tcMarc = "00826nam0 2200253   450 001001300000005001700013010003200030035002600062100004100088101000800129102001500137105001800152106000600170200009000176210004000266215002000306300002300326606005300349606005500402690001500457701005400472801002300526801002300549\u001E012003006309\u001E20160512144947.6\u001E  \u001Fa978-7-5404-7225-2\u001FdCNY35.00\u001E  \u001Fa(A100000NLC)007956479\u001E  \u001Fa20151219d2015    em y0chiy0110    ea\u001E0 \u001Fachi\u001E  \u001FaCN\u001Fb430000\u001E  \u001Fay   z   000ay\u001E  \u001Far\u001E1 \u001Fa三生三世十里桃花\u001F9san sheng san shi shi li tao hua\u001Fb专著\u001Fe新版\u001Ff唐七著\u001E  \u001Fa长沙\u001Fc湖南文艺出版社\u001Fd2015\u001E  \u001Fa12,311页\u001Fd24cm\u001E  \u001Fa唐七经典作品\u001E0 \u001Fa言情小说\u001Fy中国\u001Fz当代\u001F9yan qing xiao shuo\u001E0 \u001Fa长篇小说\u001Fy中国\u001Fz当代\u001F9chang pian xiao shuo\u001E  \u001FaI247.57\u001Fv5\u001E 0\u001Fa唐七公子\u001F9tang qi gong zi\u001Fc(女,\u001Ff1985-)\u001F4著\u001E 2\u001FaCN\u001FbOLCC\u001Fc20151125\u001E 2\u001FaCN\u001Fb0519\u001Fc20160512\u001E";
        //        String marc = "00602nam0 2200241   45 0000000600000001001100006005001700017010002800034100004100062101000800103105001800111106000600129200003000135210003100165215001600196225002100212410002800233606002300261690001200284690001400296701002900310801002200339\u001E95636\u001E0120001438\u001E20210831125124.0\u001E  \u001Fa7-203-03855-6\u001FdCNY28.00\u001E  \u001Fa20010315d1999    mk y0chiy0121    eb\u001E0 \u001Fachi\u001E  \u001Fay       000yy\u001E  \u001Far\u001E10\u001Fa湘军\u001FAxiang jun\u001Ff皮明勇著\u001E  \u001Fa太原\u001Fc山西人民出版社\u001Fd2012\u001E  \u001Fa240页\u001Fd24cm\u001E2 \u001Fa中国近代军系丛书\u001E 0\u001F120010\u001Fa中国近代军系丛书\u001E  \u001Fa湘军\u001Fb军事史\u001Fy中国\u001E  \u001FaE295\u001Fv3\u001E  \u001FaE295.2\u001Fv4\u001E 0\u001Fa皮明勇\u001F4著\u001FApi ming yong\u001E 0\u001FaCN\u001FbSYS\u001Fc20121204\u001E\u001D";
//        InputStream input = new StringBufferInputStream(marc);
        InputStream input = new ByteArrayInputStream(tcMarc.getBytes("gbk"));
//        MarcStreamReader reader = new MarcStreamReader(input);
        MarcStreamReader reader = new MarcStreamReader(input, "gbk");
        assertTrue("Should have at least one record", reader.hasNext());
        Record record1 = reader.next();
        System.out.println(record1);
        input.close();
    }
}
